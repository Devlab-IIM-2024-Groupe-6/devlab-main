{% extends 'base.html.twig' %}

{% block title %}Déposer un matériel{% endblock %}

{% block body %}
    <div class="container mx-auto my-10 px-6 lg:px-20">
        <!-- Header -->
        <header class="mb-8">
            <h1 class="text-4xl font-bold text-primary">Déposer un matériel</h1>
        </header>

        <!-- Flash Messages -->
        {% for message in app.flashes('success') %}
            <div class="alert alert-success shadow-lg mb-4">
                {{ message }}
            </div>
        {% endfor %}

        <!-- Formulaire -->
        <section class="bg-base-100 shadow-md rounded-lg p-6">
            {{ form_start(form) }}

            <!-- Champ caché pour la localisation -->
            <input type="hidden" name="location" value="{{ id }}">

            <div class="form-control mb-4">
                {{ form_label(form.first_name, null, {'label_attr': {'class': 'label-text font-semibold'}}) }}
                {{ form_widget(form.first_name, {'attr': {'class': 'input input-bordered w-full'}}) }}
                <div class="text-error text-sm">
                    {{ form_errors(form.first_name) }}
                </div>
            </div>

            <div class="form-control mb-4">
                {{ form_label(form.last_name, null, {'label_attr': {'class': 'label-text font-semibold'}}) }}
                {{ form_widget(form.last_name, {'attr': {'class': 'input input-bordered w-full'}}) }}
                <div class="text-error text-sm">
                    {{ form_errors(form.last_name) }}
                </div>
            </div>

            <div class="form-control mb-4">
                {{ form_label(form.email, null, {'label_attr': {'class': 'label-text font-semibold'}}) }}
                {{ form_widget(form.email, {'attr': {'class': 'input input-bordered w-full', 'type': 'email'}}) }}
                <div class="text-error text-sm">
                    {{ form_errors(form.email) }}
                </div>
            </div>

            <!-- Affichage de la localisation en lecture seule -->
            <div class="form-control mb-4">
                <label for="location" class="label-text font-semibold">Localisation</label>
                <input type="text" id="location" class="input input-bordered w-full" value="{{ locationName }}" readonly>
            </div>

            <div class="mt-6">
                <a href="{{ path('depot_form', { id: id }) }}" class="btn btn-link">Renseigner plus</a>
            </div>

            <div class="form-control mt-6">
                {{ form_widget(form.submit, {'attr': {'class': 'btn btn-success w-full'}}) }}
            </div>
            {{ form_end(form) }}
        </section>

        <!-- Lien vers le dépôt -->
        <div class="mt-6">
            <a href="{{ path('depot_form', { id: id }) }}" class="btn btn-link">Lien vers le dépôt actuel</a>
        </div>
    </div>
{% endblock %}
